OpenLayers.Layer.ArcGISCache=OpenLayers.Class(OpenLayers.Layer.XYZ,{url:null,tileOrigin:null,tileSize:new OpenLayers.Size(256,256),useArcGISServer:true,type:"png",useScales:false,overrideDPI:false,initialize:function(a,b,c){OpenLayers.Layer.XYZ.prototype.initialize.apply(this,arguments);if(this.resolutions){this.serverResolutions=this.resolutions;this.maxExtent=this.getMaxExtentForResolution(this.resolutions[0])}if(this.layerInfo){var d=this.layerInfo;var e=new OpenLayers.Bounds(d.fullExtent.xmin,d.fullExtent.ymin,d.fullExtent.xmax,d.fullExtent.ymax);this.projection="EPSG:"+d.spatialReference.wkid;this.sphericalMercator=d.spatialReference.wkid==102100;this.units=d.units=="esriFeet"?"ft":"m";if(!!d.tileInfo){this.tileSize=new OpenLayers.Size(d.tileInfo.width||d.tileInfo.cols,d.tileInfo.height||d.tileInfo.rows);this.tileOrigin=new OpenLayers.LonLat(d.tileInfo.origin.x,d.tileInfo.origin.y);var f=new OpenLayers.Geometry.Point(e.left,e.top);var g=new OpenLayers.Geometry.Point(e.right,e.bottom);if(this.useScales){this.scales=[]}else{this.resolutions=[]}this.lods=[];for(var h in d.tileInfo.lods){var i=d.tileInfo.lods[h];if(this.useScales){this.scales.push(i.scale)}else{this.resolutions.push(i.resolution)}var j=this.getContainingTileCoords(f,i.resolution);i.startTileCol=j.x;i.startTileRow=j.y;var k=this.getContainingTileCoords(g,i.resolution);i.endTileCol=k.x;i.endTileRow=k.y;this.lods.push(i)}this.maxExtent=this.calculateMaxExtentWithLOD(this.lods[0]);this.serverResolutions=this.resolutions;if(this.overrideDPI&&d.tileInfo.dpi){OpenLayers.DOTS_PER_INCH=d.tileInfo.dpi}}}},getContainingTileCoords:function(a,b){return new OpenLayers.Pixel(Math.max(Math.floor((a.x-this.tileOrigin.lon)/(this.tileSize.w*b)),0),Math.max(Math.floor((this.tileOrigin.lat-a.y)/(this.tileSize.h*b)),0))},calculateMaxExtentWithLOD:function(a){var b=a.endTileCol-a.startTileCol+1;var c=a.endTileRow-a.startTileRow+1;var d=this.tileOrigin.lon+a.startTileCol*this.tileSize.w*a.resolution;var e=d+b*this.tileSize.w*a.resolution;var f=this.tileOrigin.lat-a.startTileRow*this.tileSize.h*a.resolution;var g=f-c*this.tileSize.h*a.resolution;return new OpenLayers.Bounds(d,g,e,f)},calculateMaxExtentWithExtent:function(a,b){var c=new OpenLayers.Geometry.Point(a.left,a.top);var d=new OpenLayers.Geometry.Point(a.right,a.bottom);var e=this.getContainingTileCoords(c,b);var f=this.getContainingTileCoords(d,b);var g={resolution:b,startTileCol:e.x,startTileRow:e.y,endTileCol:f.x,endTileRow:f.y};return this.calculateMaxExtentWithLOD(g)},getUpperLeftTileCoord:function(a){var b=new OpenLayers.Geometry.Point(this.maxExtent.left,this.maxExtent.top);return this.getContainingTileCoords(b,a)},getLowerRightTileCoord:function(a){var b=new OpenLayers.Geometry.Point(this.maxExtent.right,this.maxExtent.bottom);return this.getContainingTileCoords(b,a)},getMaxExtentForResolution:function(a){var b=this.getUpperLeftTileCoord(a);var c=this.getLowerRightTileCoord(a);var d=c.x-b.x+1;var e=c.y-b.y+1;var f=this.tileOrigin.lon+b.x*this.tileSize.w*a;var g=f+d*this.tileSize.w*a;var h=this.tileOrigin.lat-b.y*this.tileSize.h*a;var i=h-e*this.tileSize.h*a;return new OpenLayers.Bounds(f,i,g,h)},clone:function(a){if(a==null){a=new OpenLayers.Layer.ArcGISCache(this.name,this.url,this.options)}return OpenLayers.Layer.XYZ.prototype.clone.apply(this,[a])},getMaxExtent:function(){var a=this.map.getResolution();return this.maxExtent=this.getMaxExtentForResolution(a)},getTileOrigin:function(){var a=this.getMaxExtent();return new OpenLayers.LonLat(a.left,a.bottom)},getURL:function(a){var b=this.getResolution();var c=this.tileOrigin.lon+b*this.tileSize.w/2;var d=this.tileOrigin.lat-b*this.tileSize.h/2;var e=a.getCenterLonLat();var f={x:e.lon,y:e.lat};var g=Math.round(Math.abs((e.lon-c)/(b*this.tileSize.w)));var h=Math.round(Math.abs((d-e.lat)/(b*this.tileSize.h)));var i=this.map.getZoom()+(this.minZoomLevel||0);if(this.lods){var j=this.lods[this.map.getZoom()];if(g<j.startTileCol||g>j.endTileCol||h<j.startTileRow||h>j.endTileRow){return null}}else{var k=this.getUpperLeftTileCoord(b);var l=this.getLowerRightTileCoord(b);if(g<k.x||g>=l.x||h<k.y||h>=l.y){return null}}var m=this.url;var n=""+g+h+i;if(Object.prototype.toString.call(m)==="[object Array]"){m=this.selectUrl(n,m)}if(this.useArcGISServer){m=m+"/tile/${z}/${y}/${x}"}else{g="C"+this.zeroPad(g,8,16);h="R"+this.zeroPad(h,8,16);i="L"+this.zeroPad(i,2,16);m=m+"/${z}/${y}/${x}."+this.type}m=OpenLayers.String.format(m,{x:g,y:h,z:i});return m},zeroPad:function(a,b,c){var d=a.toString(c||10);while(d.length<b){d="0"+d}return d},CLASS_NAME:"OpenLayers.Layer.ArcGISCache"});TOPO_LAYER_INFO={currentVersion:10.01,serviceDescription:'This map is designed to be used as a basemap by GIS professionals and as a reference map by anyone. The map includes administrative boundaries, cities, water features, physiographic features, parks, landmarks, highways, roads, railways, and airports overlaid on land cover and shaded relief imagery for added context. The map provides coverage for the world down to a scale of ~1:144k, coverage for Canada and Mexico to a scale of 1:18k, coverage for Australia and New Zealand, Europe, the continental United States and Hawaii, and parts of South America including Argentina, Brazil, Chile, and Venezuela to a scale of ~1:9k and coverage for Japan, Hong Kong and Macau to a scale of ~1:4.5k. The map also includes detailed maps for selected local areas to a scale of ~1:1k. \n\nThis basemap was compiled from a variety of best available sources from several data providers, including the U.S. Geological Survey (USGS), U.S. Environmental Protection Agency (EPA) , U.S. National Park Service (NPS), Food and Agriculture Organization of the United Nations (FAO), Department of Natural Resources Canada (NRCAN), GeoBase, Agriculture and Agri-Food Canada, NAVTEQ, TomTom, Automotive Navigation Data (AND), DeLorme, and Esri. \nFor more information on this map, visit us <a href="http://goto.arcgisonline.com/maps/World_Topo_Map " target="_new">online</a>.',mapName:"Layers",description:"This map is designed to be used as a basemap by GIS professionals and as a reference map by anyone. The map includes administrative boundaries, cities, water features, physiographic features, parks, landmarks, highways, roads, railways, and airports overlaid on land cover and shaded relief imagery for added context. The map provides coverage for the world down to a scale of ~1:144k, coverage for Canada and Mexico to a scale of 1:18k, coverage for Australia and New Zealand, Europe, the continental United States and Hawaii, and parts of South America including Argentina, Brazil, Chile, and Venezuela to a scale of ~1:9k and coverage for Japan, Hong Kong and Macau to a scale of ~1:4.5k. The map also includes detailed maps for selected local areas to a scale of ~1:1k. \n\nThis basemap was compiled from a variety of best available sources from several data providers, including the U.S. Geological Survey (USGS), U.S. Environmental Protection Agency (EPA) , U.S. National Park Service (NPS), Food and Agriculture Organization of the United Nations (FAO), Department of Natural Resources Canada (NRCAN), GeoBase, Agriculture and Agri-Food Canada, NAVTEQ, TomTom, Automotive Navigation Data (AND), DeLorme, and Esri. For more information on this map, visit us online at http://goto.arcgisonline.com/maps/World_Topo_Map",copyrightText:"Sources: Esri, DeLorme, NAVTEQ, TomTom, Intermap, AND, USGS, NRCAN, and the GIS User Community",layers:[{id:0,name:"Topographic Info",parentLayerId:-1,defaultVisibility:true,subLayerIds:[1,2,3,4],minScale:0,maxScale:0},{id:1,name:"Elevation (m)",parentLayerId:0,defaultVisibility:true,subLayerIds:null,minScale:0,maxScale:0},{id:2,name:"Elevation (ft)",parentLayerId:0,defaultVisibility:true,subLayerIds:null,minScale:0,maxScale:0},{id:3,name:"Slope",parentLayerId:0,defaultVisibility:true,subLayerIds:null,minScale:0,maxScale:0},{id:4,name:"Aspect",parentLayerId:0,defaultVisibility:true,subLayerIds:null,minScale:0,maxScale:0},{id:5,name:"Places Info",parentLayerId:-1,defaultVisibility:true,subLayerIds:[6,7,8,9],minScale:0,maxScale:0},{id:6,name:"Place Names (Country Level)",parentLayerId:5,defaultVisibility:true,subLayerIds:null,minScale:0,maxScale:8e7},{id:7,name:"Place Names (State Level)",parentLayerId:5,defaultVisibility:true,subLayerIds:null,minScale:80000001,maxScale:15e5},{id:8,name:"Place Names (County Level)",parentLayerId:5,defaultVisibility:true,subLayerIds:null,minScale:1500001,maxScale:4e5},{id:9,name:"Place Names (City Level)",parentLayerId:5,defaultVisibility:true,subLayerIds:null,minScale:399999,maxScale:0},{id:10,name:"Scale Descriptions",parentLayerId:-1,defaultVisibility:false,subLayerIds:[11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],minScale:0,maxScale:0},{id:11,name:"Level 15  ~1:18K",parentLayerId:10,defaultVisibility:true,subLayerIds:null,minScale:25e3,maxScale:15001},{id:12,name:"Level 14  ~1:36K",parentLayerId:10,defaultVisibility:true,subLayerIds:null,minScale:5e4,maxScale:25001},{id:13,name:"Level 13  ~1:72K",parentLayerId:10,defaultVisibility:true,subLayerIds:null,minScale:1e5,maxScale:50001},{id:14,name:"Level 12  ~1:144K",parentLayerId:10,defaultVisibility:true,subLayerIds:null,minScale:288e3,maxScale:1e5},{id:15,name:"Level 11  ~1:288K",parentLayerId:10,defaultVisibility:true,subLayerIds:null,minScale:575e3,maxScale:288e3},{id:16,name:"Level 10  ~1:577K",parentLayerId:10,defaultVisibility:true,subLayerIds:null,minScale:115e4,maxScale:575e3},{id:17,name:"Level 9    ~1:1.15M",parentLayerId:10,defaultVisibility:true,subLayerIds:null,minScale:22e5,maxScale:115e4},{id:18,name:"Level 8    ~1:2.3M",parentLayerId:10,defaultVisibility:true,subLayerIds:null,minScale:45e5,maxScale:22e5},{id:19,name:"Level 7    ~1:4.5M",parentLayerId:10,defaultVisibility:true,subLayerIds:null,minScale:9e6,maxScale:45e5},{id:20,name:"Level 6    ~1:9.2M",parentLayerId:10,defaultVisibility:true,subLayerIds:null,minScale:18e6,maxScale:9e6},{id:21,name:"Level 5    ~1:18M ",parentLayerId:10,defaultVisibility:true,subLayerIds:null,minScale:36e6,maxScale:18e6},{id:22,name:"Level 4    ~1:36M",parentLayerId:10,defaultVisibility:true,subLayerIds:null,minScale:72e6,maxScale:36e6},{id:23,name:"Level 3    ~1:72M",parentLayerId:10,defaultVisibility:true,subLayerIds:null,minScale:755e5,maxScale:7e7},{id:24,name:"Level 2    ~1:147M",parentLayerId:10,defaultVisibility:true,subLayerIds:null,minScale:29e7,maxScale:147e6},{id:25,name:"Level 1    ~1:292M",parentLayerId:10,defaultVisibility:true,subLayerIds:null,minScale:295e6,maxScale:15e7},{id:26,name:"Level 0     ~1:584M",parentLayerId:10,defaultVisibility:true,subLayerIds:null,minScale:0,maxScale:295e6},{id:27,name:"Citations",parentLayerId:-1,defaultVisibility:false,subLayerIds:null,minScale:0,maxScale:0}],tables:[],spatialReference:{wkid:102100},singleFusedMapCache:true,tileInfo:{rows:256,cols:256,dpi:96,format:"JPEG",compressionQuality:90,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:0,resolution:156543.033928,scale:591657527.591555},{level:1,resolution:78271.5169639999,scale:295828763.795777},{level:2,resolution:39135.7584820001,scale:147914381.897889},{level:3,resolution:19567.8792409999,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,scale:2256.994353},{level:19,resolution:.298582141647617,scale:1128.497176}]},initialExtent:{xmin:-20037507.0671618,ymin:-20313886.4749848,xmax:20037507.0671618,ymax:20313886.4749848,spatialReference:{wkid:102100}},fullExtent:{xmin:-20037507.0671618,ymin:-19971868.8804086,xmax:20037507.0671618,ymax:19971868.8804086,spatialReference:{wkid:102100}},units:"esriMeters",supportedImageFormatTypes:"PNG24,PNG,JPG,DIB,TIFF,EMF,PS,PDF,GIF,SVG,SVGZ,AI,BMP",documentInfo:{Title:"World Topo Map",Author:"Esri",Comments:"",Subject:"topographic, topography, administrative boundaries, cities, water features, physiographic features, parks, landmarks, highways, roads, railways, airports, land cover, shaded relief imagery",Category:"imageryBaseMapsEarthCover (Imagery, basemaps, and land cover)",Keywords:"World, Global, Australia, New Zealand, Europe, North America, Canada, Mexico, United States,  South America, Argentina, Brazil, Chile, Venezuela, 2011",Credits:"Sources: Esri, DeLorme, NAVTEQ, TomTom, Intermap, AND, USGS, NRCAN, and the GIS User Community"},capabilities:"Map,Query,Data"}